import{Ob as S,Tb as j,u as R}from"./chunk-ZLVEVZO2.js";import{Aa as D,Ba as M,Da as I}from"./chunk-ZZUDB23K.js";import{Aa as h,Ga as v,Ja as y,Mb as b,P as d,S as c,Tb as m,Ub as a,Vb as N,Xb as s,_ as w,ea as g,jb as P,kb as O,qb as C,rb as E,wa as f,za as u}from"./chunk-JM5XIBFZ.js";var V=["content"],W=["*"];function x(r,n){r&1&&O(0)}var p=class r{wolId=a();wolElement=s();wolOffset=s();wolPosition=s();wolPositioning=s();wolStopEvent=a();wolInsertFirst=a();wolAutoPan=a();wolClassName=a();wolProperties=a();wolChange=m();wolError=m();wolPropertyChange=m();instance;overlayContent=N.required("content");overlayPortal;overlayPortalOutlet;constructor(){let n=c(w),t=c(f),o=c(S,{host:!0}),i={};if(!o)throw new Error("Overlay component must be used within a Map component.");y(()=>{let e=new j({id:this.wolId(),element:this.wolElement()??document.createElement("div"),offset:this.wolOffset(),position:this.wolPosition(),positioning:this.wolPositioning(),stopEvent:this.wolStopEvent(),insertFirst:this.wolInsertFirst(),autoPan:this.wolAutoPan(),className:this.wolClassName()});this.wolProperties()&&e.setProperties(this.wolProperties()??{},!0),i.change=e.on("change",l=>this.wolChange.emit(l)),i["change:element"]=e.on("change:element",()=>this.wolElement.set(e.getElement())),i["change:offset"]=e.on("change:offset",()=>this.wolOffset.set(e.getOffset())),i["change:position"]=e.on("change:position",()=>this.wolPosition.set(e.getPosition())),i["change:positioning"]=e.on("change:positioning",()=>this.wolPositioning.set(e.getPositioning())),i.error=e.on("error",l=>this.wolError.emit(l)),i.propertychange=e.on("propertychange",l=>this.wolPropertyChange.emit(l)),Promise.resolve().then(()=>{o.getInstance()?.addOverlay(e)}),this.instance=e,this.overlayPortal=new D(this.overlayContent(),t),this.attachOverlayPortal()}),n.onDestroy(()=>{this.overlayPortalOutlet?.dispose(),this.instance&&(R(Object.values(i)),o.getInstance()?.removeOverlay(this.instance),this.instance=void 0)})}ngOnChanges(n){if(this.instance)for(let[t,o]of Object.entries(n))switch(t){case"wolElement":this.instance.setElement(o.currentValue),this.attachOverlayPortal();break;case"wolOffset":this.instance.setOffset(o.currentValue);break;case"wolPosition":this.instance.setPosition(o.currentValue);break;case"wolPositioning":this.instance.setPositioning(o.currentValue);break;case"wolProperties":this.instance.setProperties(o.currentValue??{});break}}getInstance(){return this.instance}attachOverlayPortal(){let n=this.instance?.getElement();this.overlayPortalOutlet?.dispose(),this.overlayPortalOutlet=void 0,n&&this.overlayPortal&&(this.overlayPortalOutlet=new M(n),this.overlayPortalOutlet?.attachTemplatePortal(this.overlayPortal))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=u({type:r,selectors:[["wol-overlay"]],viewQuery:function(t,o){t&1&&C(o.overlayContent,V,5),t&2&&E()},inputs:{wolId:[1,"wolId"],wolElement:[1,"wolElement"],wolOffset:[1,"wolOffset"],wolPosition:[1,"wolPosition"],wolPositioning:[1,"wolPositioning"],wolStopEvent:[1,"wolStopEvent"],wolInsertFirst:[1,"wolInsertFirst"],wolAutoPan:[1,"wolAutoPan"],wolClassName:[1,"wolClassName"],wolProperties:[1,"wolProperties"]},outputs:{wolElement:"wolElementChange",wolOffset:"wolOffsetChange",wolPosition:"wolPositionChange",wolPositioning:"wolPositioningChange",wolChange:"wolChange",wolError:"wolError",wolPropertyChange:"wolPropertyChange"},exportAs:["wolOverlay"],features:[g],ngContentSelectors:W,decls:2,vars:0,consts:[["content",""]],template:function(t,o){t&1&&(P(),v(0,x,1,0,"ng-template",null,0,b))},dependencies:[I],encapsulation:2,changeDetection:0})};var F=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=h({type:r});static \u0275inj=d({imports:[p]})};export{p as a,F as b};
