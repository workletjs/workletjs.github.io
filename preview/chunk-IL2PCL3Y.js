import{a as h}from"./chunk-VPGSP3ZU.js";import{e as O}from"./chunk-SILRN6KL.js";import{nb as a}from"./chunk-66HUV5TV.js";import{m as P}from"./chunk-3MFB6WMS.js";import{O as I,S as u,j as s}from"./chunk-2R667KKY.js";function j(e,t,m,c,d,r){let n=d.getCode().split(/:(?=\d+$)/).pop(),o=m/c,g=[s(u(t)/o,4),s(I(t)/o,4)];r.SIZE=g[0]+","+g[1],r.BBOX=t.join(","),r.BBOXSR=n,r.IMAGESR=n,r.DPI=Math.round(r.DPI?r.DPI*c:90*c);let i=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return h(i,r)}function G(e){let t=e.load?e.load:a,m=P(e.projection||"EPSG:3857"),c=e.ratio??1.5,d=e.crossOrigin??null;return function(r,n,o){o=e.hidpi?o:1;let g={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(g,e.params),r=O(r,n,o,c);let i=j(e.url,r,n,o,m,g),f=new Image;return f.crossOrigin=d,t(f,i).then(S=>{let E=u(r)/S.width*o;return{image:S,extent:r,resolution:E,pixelRatio:o}})}}export{j as a,G as b};
