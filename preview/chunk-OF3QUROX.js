import{a as tt}from"./chunk-VOYZW2DD.js";import{e as Pt,f as bt,g as vt,h as Ut,i as Gt}from"./chunk-KNT5A3QN.js";import{c as Z,d as st,e as St,f as Dt}from"./chunk-3QYH437L.js";import{Ac as pt,Bc as $,F as xt,Gc as Ft,Ic as Lt,J as p,Ta as lt,a as q,o as Tt,s as mt,u as at,yc as Rt,z as J,zb as Q,zc as At}from"./chunk-SFR7ATWH.js";import{m as dt,u as k}from"./chunk-OAKYQQNU.js";import{B as V,C as H,D as ot,F as K,N as _t,O as nt,j as Et,q as ht,u as it}from"./chunk-GF377ULF.js";var Ht=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Zt=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,et=class{constructor(e){this.gl_=e,this.program_=rt(e,Zt,Ht),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,o,i,n,a,R,f,x,S,M,F,E,h){let r=this.gl_;x===void 0&&(x=n),S===void 0&&(S=a),R===void 0&&(R=o),f===void 0&&(f=i),M===void 0&&(M=R),F===void 0&&(F=f),E===void 0&&(E=r.canvas.width),h===void 0&&(h=r.canvas.height),r.bindTexture(r.TEXTURE_2D,e),r.useProgram(this.program_),r.bindBuffer(r.ARRAY_BUFFER,this.positionBuffer),r.enableVertexAttribArray(this.positionLocation),r.vertexAttribPointer(this.positionLocation,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.texcoordBuffer),r.enableVertexAttribArray(this.texcoordLocation),r.vertexAttribPointer(this.texcoordLocation,2,r.FLOAT,!1,0,0);let c=Z(0,E,0,h,-1,1);c=St(c,x,S,0),c=st(c,M,F,1),r.uniformMatrix4fv(this.matrixLocation,!1,c);let L=Dt(n/o,a/i,0);L=st(L,R/o,f/i,1),r.uniformMatrix4fv(this.textureMatrixLocation,!1,L),r.uniform1i(this.textureLocation,0),r.drawArrays(r.TRIANGLES,0,this.positions.length/2)}};function Mt(t,e,o){let i=t.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(t.shaderSource(i,o),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){let n=t.getShaderInfoLog(i);throw n===null?new Error("Shader info log creation failed"):new Error(n)}return i}function rt(t,e,o){let i=t.createProgram(),n=Mt(t,t.VERTEX_SHADER,o),a=Mt(t,t.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw t.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}var Vt=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,kt=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,qt=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Jt=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Ct(t,e,o,i){let n;return o&&o.length?n=o.shift():xt?n=new OffscreenCanvas(t||300,e||300):n=document.createElement("canvas"),t&&(n.width=t),e&&(n.height=e),n.getContext("webgl",i)}function yt(t){let e=t.canvas;e.width=1,e.height=1,t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}var ct=[];function wt(t,e,o,i,n,a,R,f,x,S,M,F,E,h){let r=Math.round(i*e),c=Math.round(i*o);t.canvas.width=r,t.canvas.height=c;let L,G;if(G=t.createTexture(),t.bindTexture(t.TEXTURE_2D,G),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),E?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,c,0,t.RGBA,M,null),L=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,L),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,G,0),L===null)throw new Error("Could not create framebuffer");if(G===null)throw new Error("Could not create texture");if(x.length===0)return{width:r,height:c,framebuffer:L,texture:G};let d=Et();x.forEach(function(s,D,u){ht(d,s.extent)});let j,_,T,v=1/n;if(!h||x.length!==1||S!==0){if(j=t.createTexture(),G===null)throw new Error("Could not create texture");_=Math.round(K(d)*v),T=Math.round(V(d)*v);let s=t.getParameter(t.MAX_TEXTURE_SIZE),D=Math.max(_,T),u=D>s?s/D:1,l=Math.round(_*u),U=Math.round(T*u);t.bindTexture(t.TEXTURE_2D,j),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),E?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,l,U,0,t.RGBA,M,null);let A=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,j,0);let I=new et(t);x.forEach(function(m,B,C){let P=(m.extent[0]-d[0])*v*u,X=-(m.extent[3]-d[3])*v*u,g=K(m.extent)*v*u,b=V(m.extent)*v*u;if(t.bindFramebuffer(t.FRAMEBUFFER,A),t.viewport(0,0,l,U),m.clipExtent){let O=(m.clipExtent[0]-d[0])*v*u,N=-(m.clipExtent[3]-d[3])*v*u,Y=K(m.clipExtent)*v*u,W=V(m.clipExtent)*v*u;t.enable(t.SCISSOR_TEST),t.scissor(E?O:Math.round(O),E?N:Math.round(N),E?Y:Math.round(O+Y)-Math.round(O),E?W:Math.round(N+W)-Math.round(N))}I.drawImage(m.texture,m.width,m.height,S,S,m.width-2*S,m.height-2*S,E?P:Math.round(P),E?X:Math.round(X),E?g:Math.round(P+g)-Math.round(P),E?b:Math.round(X+b)-Math.round(X),l,U),t.disable(t.SCISSOR_TEST)}),t.deleteFramebuffer(A)}else j=x[0].texture,_=x[0].width,T=x[0].width;let y=ot(R),w=ot(d),z=s=>{let D=(s[0][0]-y[0])/a*i,u=-(s[0][1]-y[1])/a*i,l=(s[1][0]-y[0])/a*i,U=-(s[1][1]-y[1])/a*i,A=(s[2][0]-y[0])/a*i,I=-(s[2][1]-y[1])/a*i;return{u1:l,v1:U,u0:D,v0:u,u2:A,v2:I}};t.bindFramebuffer(t.FRAMEBUFFER,L),t.viewport(0,0,r,c);{let s=[],D=[],u=rt(t,Jt,qt);t.useProgram(u);let l=t.getUniformLocation(u,"u_texture");t.bindTexture(t.TEXTURE_2D,j),t.uniform1i(l,0),f.getTriangles().forEach(function(P,X,g){let b=P.source,O=P.target,{u1:N,v1:Y,u0:W,v0:Xt,u2:Bt,v2:Ot}=z(O),jt=(b[0][0]-w[0])/n/_,gt=-(b[0][1]-w[1])/n/T,Nt=(b[1][0]-w[0])/n/_,zt=-(b[1][1]-w[1])/n/T,Yt=(b[2][0]-w[0])/n/_,Wt=-(b[2][1]-w[1])/n/T;s.push(N,Y,W,Xt,Bt,Ot),D.push(Nt,zt,jt,gt,Yt,Wt)});let U=Z(0,r,c,0,-1,1),A=t.getUniformLocation(u,"u_matrix");t.uniformMatrix4fv(A,!1,U);let I=t.getAttribLocation(u,"a_position"),m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),t.vertexAttribPointer(I,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(I);let B=t.getAttribLocation(u,"a_texcoord"),C=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,C),t.bufferData(t.ARRAY_BUFFER,new Float32Array(D),t.STATIC_DRAW),t.vertexAttribPointer(B,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(B),t.drawArrays(t.TRIANGLES,0,s.length/2)}if(F){let s=rt(t,kt,Vt);t.useProgram(s);let D=Z(0,r,c,0,-1,1),u=t.getUniformLocation(s,"u_matrix");t.uniformMatrix4fv(u,!1,D);let l=Array.isArray(F)?F:[0,0,0,255],U=t.getUniformLocation(s,"u_val");!0?t.uniform4fv(U,l):t.uniform4iv(U,l);let I=t.getAttribLocation(s,"a_position"),m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m),t.vertexAttribPointer(I,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(I);let B=f.getTriangles().reduce(function(C,P){let X=P.target,{u1:g,v1:b,u0:O,v0:N,u2:Y,v2:W}=z(X);return C.concat([g,b,O,N,O,N,Y,W,Y,W,g,b])},[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array(B),t.STATIC_DRAW),t.drawArrays(t.LINES,0,B.length/2)}return{width:r,height:c,framebuffer:L,texture:G}}var ut=class extends ${constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let o=e.sourceProj,i=o.getExtent(),n=e.sourceTileGrid.getExtent();this.clipExtent_=o.canWrapX()?n?H(i,n):i:n;let a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),R=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),x=R?H(a,R):a;if(it(x)===0){this.state=p.EMPTY;return}i&&(f?f=H(f,i):f=i);let S=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),M=e.targetProj,F=Ft(o,M,x,S);if(!isFinite(F)||F<=0){this.state=p.EMPTY;return}let E=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new Lt(o,M,x,f,F*E,S,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=p.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(F);let h=this.triangulation_.calculateSourceExtent();if(f&&(o.canWrapX()?(h[1]=nt(h[1],f[1],f[3]),h[3]=nt(h[3],f[1],f[3])):h=H(h,f)),!it(h))this.state=p.EMPTY;else{let r=0,c=0;o.canWrapX()&&(r=K(i),c=Math.floor((h[0]-i[0])/r)),_t(h.slice(),o,!0).forEach(G=>{let d=this.sourceTileGrid_.getTileRangeForExtentAndZ(G,this.sourceZ_),j=e.getTileFunction;for(let _=d.minX;_<=d.maxX;_++)for(let T=d.minY;T<=d.maxY;T++){let v=j(this.sourceZ_,_,T,this.pixelRatio_);if(v){let y=c*r;this.sourceTiles_.push({tile:v,offset:y})}}++c}),this.sourceTiles_.length===0&&(this.state=p.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){let e=[],o=!1;if(this.sourceTiles_.forEach(_=>{let T=_.tile;if(!T||T.getState()!==p.LOADED)return;let v=T.getSize(),y=this.gutter_,w,z=At(T.getData());z?w=z:(o=!0,w=pt(Rt(T.getData())));let s=[v[0]+2*y,v[1]+2*y],D=w instanceof Float32Array,u=s[0]*s[1],l=D?Float32Array:Uint8ClampedArray,U=new l(w.buffer),A=l.BYTES_PER_ELEMENT,I=A*U.length/u,m=U.byteLength/s[1],B=Math.floor(m/A/s[0]),C=this.sourceTileGrid_.getTileCoordExtent(T.tileCoord);C[0]+=_.offset,C[2]+=_.offset;let P=this.clipExtent_?.slice();P&&(P[0]+=_.offset,P[2]+=_.offset),e.push({extent:C,clipExtent:P,data:U,dataType:l,bytesPerPixel:I,pixelSize:s,bandCount:B})}),this.sourceTiles_.length=0,e.length===0){this.state=p.ERROR,this.changed();return}let i=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(i),a=typeof n=="number"?n:n[0],R=typeof n=="number"?n:n[1],f=a*this.pixelRatio_,x=R*this.pixelRatio_,S=this.targetTileGrid_.getResolution(i),M=this.sourceTileGrid_.getResolution(this.sourceZ_),F=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),E=e[0].bandCount,h=new e[0].dataType(E*f*x),r=Ct(f,x,ct,{premultipliedAlpha:!1,antialias:!1}),c,L=r.RGBA,G;e[0].dataType==Float32Array?(G=r.FLOAT,r.getExtension("WEBGL_color_buffer_float"),r.getExtension("OES_texture_float"),r.getExtension("EXT_float_blend"),c=r.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(G=r.UNSIGNED_BYTE,c=this.interpolate);let d=4,j=Math.ceil(E/d);for(let _=j-1;_>=0;--_){let T=[];for(let l=0,U=e.length;l<U;++l){let A=e[l],I=A.pixelSize,m=I[0],B=I[1],C=new A.dataType(d*m*B),P=A.data,X=_*d;for(let b=0,O=C.length;b<O;b+=d)C[b]=P[X],C[b+1]=P[X+1],C[b+2]=P[X+2],C[b+3]=P[X+3],X+=E;let g=r.createTexture();r.bindTexture(r.TEXTURE_2D,g),c?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,L,m,B,0,L,G,C),T.push({extent:A.extent,clipExtent:A.clipExtent,texture:g,width:m,height:B})}let{framebuffer:v,width:y,height:w}=wt(r,a,R,this.pixelRatio_,M,S,F,this.triangulation_,T,this.gutter_,G,this.renderEdges_,c),z=y,s=w*d,D=new e[0].dataType(z*s);r.bindFramebuffer(r.FRAMEBUFFER,v),r.readPixels(0,0,y,w,r.RGBA,G,D);let u=_*d;for(let l=0,U=D.length;l<U;l+=d){let A=(z-1-(l/s|0))*s+l%s;h[u]=D[A],h[u+1]=D[A+1],h[u+2]=D[A+2],h[u+3]=D[A+3],u+=E}}if(yt(r),ct.push(r.canvas),o){let _=lt(a,R),T=new ImageData(h,a);_.putImageData(T,0,0),this.reprojData_=_.canvas}else this.reprojData_=h;this.reprojSize_=[Math.round(f),Math.round(x)],this.state=p.LOADED,this.changed()}load(){if(this.state!==p.IDLE&&this.state!==p.ERROR)return;this.state=p.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:o})=>{let i=o.getState();if(i!==p.IDLE&&i!==p.LOADING)return;e++;let n=mt(o,q.CHANGE,()=>{let a=o.getState();(a==p.LOADED||a==p.ERROR||a==p.EMPTY)&&(at(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:o}){o.getState()==p.IDLE&&o.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(at),this.sourcesListenerKeys_=null}},It=ut;var ft=class extends Gt{constructor(e){let o=e.projection===void 0?"EPSG:3857":e.projection,i=e.tileGrid;i===void 0&&o&&(i=bt({extent:vt(o),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:o,tileGrid:i,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Q(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;let o=this.getTileGrid();return o?Q(o.getTileSize(e)):[256,256]}getGutterForProjection(e){let o=this.getProjection();return(!o||k(o,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,o,i,n,a){let R=this.tileGrid||this.getTileGridForProjection(a||n),f=Math.max.apply(null,R.getResolutions().map((h,r)=>{let c=Q(R.getTileSize(r)),L=this.getTileSize(r);return Math.max(L[0]/c[0],L[1]/c[1])})),x=this.getTileGridForProjection(n),S=[e,o,i],M=this.getTileCoordForTileUrlFunction(S,n),F=Object.assign({sourceProj:a||n,sourceTileGrid:R,targetProj:n,targetTileGrid:x,tileCoord:S,wrappedTileCoord:M,pixelRatio:f,gutter:this.gutter_,getTileFunction:(h,r,c,L)=>this.getTile(h,r,c,L),transformMatrix:this.transformMatrix},this.tileOptions),E=new It(F);return E.key=this.getKey(),E}getTile(e,o,i,n,a){let R=this.getProjection();if(a&&(R&&!k(R,a)||this.transformMatrix))return this.getReprojTile_(e,o,i,a,R);let f=this.getTileSize(e),x=this.loader_,S=new AbortController,M={signal:S.signal,crossOrigin:this.crossOrigin_},F=this.getTileCoordForTileUrlFunction([e,o,i]);if(!F)return null;let E=F[0],h=F[1],r=F[2],c=this.getTileGrid()?.getFullTileRange(E);c&&(M.maxY=c.getHeight()-1);function L(){return Tt(function(){return x(E,h,r,M)})}let G=Object.assign({tileCoord:[e,o,i],loader:L,size:f,controller:S},this.tileOptions),d=new $(G);return d.key=this.getKey(),d.addEventListener(q.CHANGE,this.handleTileChange_),d}handleTileChange_(e){let o=e.target,i=J(o),n=o.getState(),a;n==p.LOADING?(this.tileLoadingKeys_[i]=!0,a=tt.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=n==p.ERROR?tt.TILELOADERROR:n==p.LOADED?tt.TILELOADEND:void 0),a&&this.dispatchEvent(new Ut(a,o))}getTileGridForProjection(e){let o=this.getProjection();if(this.tileGrid&&(!o||k(o,e))&&!this.transformMatrix)return this.tileGrid;let i=J(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=Pt(e)),this.tileGridForProjection_[i]}setTileGridForProjection(e,o){let i=dt(e);if(i){let n=J(i);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=o)}}},Pe=ft;export{Pe as a};
