import{a as z}from"./chunk-N45JBZAS.js";import{a as y}from"./chunk-XXBF3HSJ.js";import{b as p}from"./chunk-NI25WNVY.js";import{E as u,a as l,ha as g}from"./chunk-5QSZOAPF.js";import{m as x}from"./chunk-XVBTN5DM.js";var c=class extends z{constructor(t){t=t||{};let S=t.template||"z:{z} x:{x} y:{y}",e=t.source,f=t.color||"grey";super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:e!==void 0?e.getWrapX():void 0});let m=()=>{this.projection=t.projection!==void 0?x(t.projection):e!==void 0?e.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:e!==void 0?e.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:e!==void 0?e.zDirection:this.zDirection,e instanceof y&&(this.transformMatrix=e.transformMatrix?.slice()||null);let r=this.tileGrid;r&&this.setTileSizes(r.getResolutions().map((s,a)=>g(r.getTileSize(a)).map(d=>Math.max(Math.floor(d),1)))),this.setLoader((s,a,d,G)=>{let h=p(S,s,a,d,G.maxY),[n,o]=this.getTileSize(s),i=u(n,o);return i.strokeStyle=f,i.strokeRect(.5,.5,n+.5,o+.5),i.fillStyle=f,i.strokeStyle="white",i.textAlign="center",i.textBaseline="middle",i.font="24px sans-serif",i.lineWidth=4,i.strokeText(h,n/2,o/2,n),i.fillText(h,n/2,o/2,n),Promise.resolve(i.canvas)}),this.setState("ready")};if(e===void 0||e.getState()==="ready")m();else{let r=()=>{e.getState()==="ready"&&(e.removeEventListener(l.CHANGE,r),m())};e.addEventListener(l.CHANGE,r)}}},C=c;export{C as a};
