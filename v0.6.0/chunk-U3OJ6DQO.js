import{a as o}from"./chunk-NVI3MAJC.js";import{a as f}from"./chunk-SGTWW3EY.js";import{Oc as g,yb as c,zb as d}from"./chunk-7GOL55Z2.js";import{U as u,j as m}from"./chunk-GF377ULF.js";var l=class extends f{constructor(e){e=e||{},super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.params_=Object.assign({},e.params),this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=m(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let e=0,t=[];for(let i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}getParams(){return this.params_}getRequestUrl_(e,t,i,s,h,a){let r=this.urls;if(!r)return;let n;if(r.length==1)n=r[0];else{let _=u(g(e),r.length);n=r[_]}return o(n,i,(this.tileGrid||this.getTileGridForProjection(h)).getResolution(e[0]),s,h,a)}getTilePixelRatio(e){return this.hidpi_?e:1}setParams(e){this.params_=Object.assign({},e),this.setKey(this.getKeyForParams_())}updateParams(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}tileUrlFunction(e,t,i){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),s.getResolutions().length<=e[0])return;t!=1&&!this.hidpi_&&(t=1);let h=s.getTileCoordExtent(e,this.tmpExtent_),a=d(s.getTileSize(e[0]),this.tmpSize);t!=1&&(a=c(a,t,this.tmpSize));let r={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(r,this.params_),this.getRequestUrl_(e,a,h,t,i,r)}},S=l;export{S as a};
