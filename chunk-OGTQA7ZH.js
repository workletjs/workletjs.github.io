import{a as f}from"./chunk-UZSB5XDV.js";import{b as c}from"./chunk-P5HNB6Y6.js";import{a as l,d}from"./chunk-7AWBDSB5.js";var u=class extends f{constructor(e){let t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid,i=e.urls;i===void 0&&e.url!==void 0&&(i=d(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=c(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;let t=e.join(`
`);this.setTileUrlFunction(c(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let e=this.urls?this.urls.slice(0):[];for(let t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){let t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?l(e,n):e.replace(/\{(\w+?)\}/g,function(r,o){return o.toLowerCase()in n?n[o.toLowerCase()]:r});let i=this.tileGrid,m=this.dimensions_;return(function(r,o,S){if(!r)return;let a={TileMatrix:i.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object.assign(a,m);let s=e;return t=="KVP"?s=l(s,a):s=s.replace(/\{(\w+?)\}/g,function(T,x){return encodeURIComponent(a[x])}),s})}},C=u;export{C as a};
