import{d as C}from"./chunk-GGLX42I6.js";import{e as m}from"./chunk-PHKAW2CZ.js";import{Ec as P,J as u,Lc as G,a as j,z as a}from"./chunk-XXB2L3KO.js";import{m as F,u as h}from"./chunk-S7COXUW4.js";var g=class extends C{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:P,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!h(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){let i=this.getProjection();if(this.tileGrid&&(!i||h(i,e)))return this.tileGrid;let t=a(e);return t in this.tileGridForProjection||(this.tileGridForProjection[t]=m(e)),this.tileGridForProjection[t]}createTile_(e,i,t,n,r,o){let l=[e,i,t],d=this.getTileCoordForTileUrlFunction(l,r),s=d?this.tileUrlFunction(d,n,r):void 0,c=new this.tileClass(l,s!==void 0?u.IDLE:u.EMPTY,s!==void 0?s:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(j.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,i,t,n,r){let o=this.getProjection();if(!o||!r||h(o,r))return this.getTileInternal(e,i,t,n,o||r);let l=[e,i,t],d=this.getKey(),s=this.getTileGridForProjection(o),c=this.getTileGridForProjection(r),y=this.getTileCoordForTileUrlFunction(l,r),f=new G(o,s,r,c,l,y,this.getTilePixelRatio(n),this.getGutter(),(E,R,b,U)=>this.getTileInternal(E,R,b,U,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=d,f}getTileInternal(e,i,t,n,r){let o=this.getKey();return this.createTile_(e,i,t,n,r,o)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,i){let t=F(e);if(t){let n=a(t);n in this.tileGridForProjection||(this.tileGridForProjection[n]=i)}}};function _(T,e){T.getImage().src=e}var x=g;export{x as a};
