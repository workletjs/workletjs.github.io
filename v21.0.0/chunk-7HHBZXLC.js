import{b as C,c as y,f as I,g as L}from"./chunk-6BYOJ3FH.js";import{i as E}from"./chunk-MRMNWXPC.js";import{B as M,v as h,vb as v,xc as x}from"./chunk-ML66Q7BB.js";import{Aa as w,S as c,Sb as a,Tb as i,Wb as l,_ as u,fa as m,kb as p,lb as g,ra as d}from"./chunk-DTKK3HU7.js";import{a as R,b as S}from"./chunk-TWZW5B45.js";var N=["*"],f=class s{wolClassName=i();wolOpacity=l();wolVisible=l();wolExtent=l();wolZIndex=l();wolMinResolution=l();wolMaxResolution=l();wolMinZoom=l();wolMaxZoom=l();wolMap=i();wolSource=l();wolProperties=i();wolChange=a();wolError=a();wolPostRender=a();wolPreRender=a();wolPropertyChange=a();wolSourceReady=a();instance;constructor(){let r=c(u),n=x("ImageLayer"),e={};d(()=>{let o=new y({className:this.wolClassName(),opacity:this.wolOpacity(),visible:this.wolVisible(),extent:this.wolExtent(),zIndex:this.wolZIndex(),minResolution:this.wolMinResolution(),maxResolution:this.wolMaxResolution(),minZoom:this.wolMinZoom(),maxZoom:this.wolMaxZoom(),map:this.wolMap(),source:this.wolSource(),properties:this.wolProperties()});e.change=o.on("change",t=>this.wolChange.emit(t)),e["change:extent"]=o.on("change:extent",()=>this.wolExtent.set(o.getExtent())),e["change:maxResolution"]=o.on("change:maxResolution",()=>this.wolMaxResolution.set(o.getMaxResolution())),e["change:minResolution"]=o.on("change:minResolution",()=>this.wolMinResolution.set(o.getMinResolution())),e["change:maxZoom"]=o.on("change:maxZoom",()=>this.wolMaxZoom.set(o.getMaxZoom())),e["change:minZoom"]=o.on("change:minZoom",()=>this.wolMinZoom.set(o.getMinZoom())),e["change:opacity"]=o.on("change:opacity",()=>this.wolOpacity.set(o.getOpacity())),e["change:source"]=o.on("change:source",()=>this.wolSource.set(o.getSource()??void 0)),e["change:visible"]=o.on("change:visible",()=>this.wolVisible.set(o.getVisible())),e["change:zIndex"]=o.on("change:zIndex",()=>this.wolZIndex.set(o.getZIndex())),e.error=o.on("error",t=>this.wolError.emit(t)),e.postrender=o.on("postrender",t=>this.wolPostRender.emit(t)),e.prerender=o.on("prerender",t=>this.wolPreRender.emit(t)),e.propertychange=o.on("propertychange",t=>this.wolPropertyChange.emit(t)),Promise.resolve().then(()=>{n.addLayer(o)}),this.instance=o}),r.onDestroy(()=>{this.instance&&(h(Object.values(e)),n.removeLayer(this.instance),this.instance=void 0)})}ngOnChanges(r){if(this.instance)for(let[n,e]of Object.entries(r))switch(n){case"wolExtent":this.instance.setExtent(e.currentValue);break;case"wolMap":this.instance.setMap(e.currentValue);break;case"wolMaxResolution":this.instance.setMaxResolution(e.currentValue);break;case"wolMaxZoom":this.instance.setMaxZoom(e.currentValue);break;case"wolMinResolution":this.instance.setMinResolution(e.currentValue);break;case"wolMinZoom":this.instance.setMinZoom(e.currentValue);break;case"wolOpacity":this.instance.setOpacity(e.currentValue);break;case"wolProperties":this.instance.setProperties(e.currentValue);break;case"wolSource":this.instance.setSource(e.currentValue);break;case"wolVisible":this.instance.setVisible(e.currentValue);break;case"wolZIndex":this.instance.setZIndex(e.currentValue);break}}getInstance(){return this.instance}static \u0275fac=function(n){return new(n||s)};static \u0275cmp=w({type:s,selectors:[["wol-image-layer"]],inputs:{wolClassName:[1,"wolClassName"],wolOpacity:[1,"wolOpacity"],wolVisible:[1,"wolVisible"],wolExtent:[1,"wolExtent"],wolZIndex:[1,"wolZIndex"],wolMinResolution:[1,"wolMinResolution"],wolMaxResolution:[1,"wolMaxResolution"],wolMinZoom:[1,"wolMinZoom"],wolMaxZoom:[1,"wolMaxZoom"],wolMap:[1,"wolMap"],wolSource:[1,"wolSource"],wolProperties:[1,"wolProperties"]},outputs:{wolOpacity:"wolOpacityChange",wolVisible:"wolVisibleChange",wolExtent:"wolExtentChange",wolZIndex:"wolZIndexChange",wolMinResolution:"wolMinResolutionChange",wolMaxResolution:"wolMaxResolutionChange",wolMinZoom:"wolMinZoomChange",wolMaxZoom:"wolMaxZoomChange",wolSource:"wolSourceChange",wolChange:"wolChange",wolError:"wolError",wolPostRender:"wolPostRender",wolPreRender:"wolPreRender",wolPropertyChange:"wolPropertyChange",wolSourceReady:"wolSourceReady"},features:[m],ngContentSelectors:N,decls:1,vars:0,template:function(n,e){n&1&&(p(),g(0))},encapsulation:2,changeDetection:0})};function O(){let s=c(f,{host:!0,optional:!0});if(s)return{setSource:r=>{s.getInstance()?.setSource(r)},getInstance:()=>s.getInstance()};throw new Error("No raster source host found. Please wrap the Raster source component in an ImageLayer component.")}function b(s){let r=[];for(let n of s)n instanceof v&&r.push(n),n instanceof E&&r.push(new C({source:n})),n instanceof I&&r.push(new y({source:n}));return r}var V=["*"],P=class s{wolAttributions=i();wolSources=i();wolOperation=i();wolLib=i();wolThreads=i();wolOperationType=i();wolResolutions=i();wolProperties=i();wolAfterOperations=a();wolBeforeOperations=a();wolChange=a();wolError=a();wolImageLoadEnd=a();wolImageLoadError=a();wolImageLoadStart=a();wolPropertyChange=a();sources=new M;instance;constructor(){let r=c(u),n=O(),e={};d(()=>{let o=new L({sources:this.wolSources()??this.sources.getArray(),operation:this.wolOperation(),lib:this.wolLib(),threads:this.wolThreads(),operationType:this.wolOperationType(),resolutions:this.wolResolutions()});this.wolAttributions()||o.setAttributions(this.wolAttributions()),this.wolProperties()||o.setProperties(this.wolProperties()??{},!0),e.afteroperations=o.on("afteroperations",t=>this.wolAfterOperations.emit(t)),e.beforeoperations=o.on("beforeoperations",t=>this.wolBeforeOperations.emit(t)),e.change=o.on("change",t=>this.wolChange.emit(t)),e.error=o.on("error",t=>this.wolError.emit(t)),e.imageloadend=o.on("imageloadend",t=>this.wolImageLoadEnd.emit(t)),e.imageloaderror=o.on("imageloaderror",t=>this.wolImageLoadError.emit(t)),e.imageloadstart=o.on("imageloadstart",t=>this.wolImageLoadStart.emit(t)),e.propertychange=o.on("propertychange",t=>this.wolPropertyChange.emit(t)),Promise.resolve().then(()=>{n.setSource(o)}),this.instance=o}),r.onDestroy(()=>{this.instance&&(h(Object.values(e)),n.setSource(null),this.instance=void 0)})}ngOnChanges(r){if(!this.instance)return;let n=this.wolOperation(),e=this.wolLib();for(let[o,t]of Object.entries(r))switch(o){case"wolAttributions":this.instance.setAttributions(t.currentValue);break;case"wolOperation":case"wolLib":n&&this.instance.setOperation(n,e);break;case"wolResolutions":this.instance.setResolutions(t.currentValue);break;case"wolProperties":this.instance.setProperties(t.currentValue??{},!1);break}}getInstance(){return this.instance}addSource(r){this.sources.push(r),this.updateSources()}removeSource(r){this.sources.remove(r),this.updateSources()}updateSources(){if(!this.instance)return;let n=b(this.sources.getArray()).map(e=>e.getLayerState());this.instance.layers_=b(this.sources.getArray()),this.instance.frameState_=S(R({},this.instance.frameState_),{layerStatesArray:n}),this.instance.changed()}static \u0275fac=function(n){return new(n||s)};static \u0275cmp=w({type:s,selectors:[["wol-raster-source"]],inputs:{wolAttributions:[1,"wolAttributions"],wolSources:[1,"wolSources"],wolOperation:[1,"wolOperation"],wolLib:[1,"wolLib"],wolThreads:[1,"wolThreads"],wolOperationType:[1,"wolOperationType"],wolResolutions:[1,"wolResolutions"],wolProperties:[1,"wolProperties"]},outputs:{wolAfterOperations:"wolAfterOperations",wolBeforeOperations:"wolBeforeOperations",wolChange:"wolChange",wolError:"wolError",wolImageLoadEnd:"wolImageLoadEnd",wolImageLoadError:"wolImageLoadError",wolImageLoadStart:"wolImageLoadStart",wolPropertyChange:"wolPropertyChange"},features:[m],ngContentSelectors:V,decls:1,vars:0,template:function(n,e){n&1&&(p(),g(0))},encapsulation:2,changeDetection:0})};export{f as a,P as b};
