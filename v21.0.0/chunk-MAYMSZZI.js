import{d as x,f as E}from"./chunk-6BYOJ3FH.js";import{Pb as a,Qb as f,a as u}from"./chunk-ML66Q7BB.js";import{m as h}from"./chunk-7JDMKNL2.js";import{O as c,S as l,T as d}from"./chunk-247T7M3Z.js";function I(i){let e=i.load||a,t=i.imageExtent,o=i.crossOrigin??null;return()=>{let r=new Image;return r.crossOrigin=o,e(r,i.url).then(n=>{let s=l(t)/n.width,g=c(t)/n.height;return{image:n,extent:t,resolution:s!==g?[s,g]:g,pixelRatio:1}})}}var m=class extends E{constructor(e){let t=e.crossOrigin!==void 0?e.crossOrigin:null,o=e.imageLoadFunction!==void 0?e.imageLoadFunction:x;super({attributions:e.attributions,interpolate:e.interpolate,projection:h(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new f(this.imageExtent_,void 0,1,I({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(r,n)=>(this.image.setImage(r),o(this.image,n),a(r))})),this.image.addEventListener(u.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,o,r){return d(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}},H=m;export{H as a};
